# Mizual Custom Netdata Alerts
# Mount this to /etc/netdata/health.d/mizual.conf in container

# CPU Alert - More aggressive than default
alarm: mizual_high_cpu
   on: system.cpu
 calc: $user + $system + $nice + $iowait
every: 10s
 warn: $this > 70
 crit: $this > 85
 info: Mizual system CPU usage is high

# Memory Alert - Customized for 2GB system
alarm: mizual_high_memory  
   on: system.ram
 calc: ($used - $buffers - $cached) * 100 / $used
every: 10s
 warn: $this > 75
 crit: $this > 90
 info: Mizual system memory usage is high

# Docker Container Health
alarm: mizual_backend_down
   on: docker_container.running_containers
 calc: $mizual-backend
every: 30s
 crit: $this != 1
 info: Mizual backend container is not running

alarm: mizual_celery_down  
   on: docker_container.running_containers
 calc: $mizual-celery
every: 30s
 crit: $this != 1
 info: Mizual celery container is not running

# Disk space alert for registry data
alarm: mizual_disk_space
   on: disk_space._opt_mizual
 calc: $used
every: 60s
 warn: $this > 80
 crit: $this > 95
 info: Mizual application disk space is running low