# Mizual Backend Environment Variables - Unified Template
# Configuration for both dev and production environments
# Both environments: Lightsail 2GB RAM, 2 vCPU

# Environment Configuration (Set per environment)
ENVIRONMENT=production  # Change to 'preview' for dev environment
DATABASE_SCHEMA=public  # Change to 'preview' for dev environment

# Resource Configuration (Unified for 2GB RAM, 2 vCPU)
MAX_WORKERS=5
CELERY_WORKER_MEMORY_LIMIT=1GB
CELERY_CONCURRENCY=2

# Rate Limiting Configuration (Production)
RATE_LIMIT_DAILY_IMAGES=100
RATE_LIMIT_BURST_SECONDS=5
RATE_LIMIT_STATUS_CHECKS_PER_MINUTE=60

# LLM Configuration for Prompt Enhancement
ENABLE_PROMPT_ENHANCEMENT=true
LLM_PROVIDER=gemini
LLM_MODEL=gemini-1.5-flash
LLM_API_KEY=your_gemini_api_key_here
LLM_MAX_IMAGE_DIMENSION=1024
LLM_TIMEOUT=30

# BFL API Configuration
BFL_API_KEY=your_bfl_api_key_here
FLUX_API_URL=https://api.bfl.ai/v1/flux-kontext-pro

# Database Configuration (Supabase Production)
DATABASE_URL=postgresql://user:password@host:port/database

# Storage Configuration (Backblaze B2)
S3_BUCKET_NAME=mizual-images
S3_ENDPOINT_URL=https://s3.us-east-005.backblazeb2.com
S3_PUBLIC_URL=https://f005.backblazeb2.com
S3_ACCESS_KEY_ID=your_backblaze_key_id
S3_SECRET_ACCESS_KEY=your_backblaze_secret

# Queue Configuration (Local Redis on Lightsail)
CELERY_BROKER_URL=redis://redis:6379/0  # Use /0 for prod, /1 for dev if needed
CELERY_RESULT_BACKEND=redis://redis:6379/0

# Production Settings
PYTHONUNBUFFERED=1
LOG_LEVEL=WARNING

# Image Type Validation
UNSUPPORTED_IMAGE_TYPES=heic,avif,gif